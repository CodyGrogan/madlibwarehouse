(this["webpackJsonpmadlib-warehouse"]=this["webpackJsonpmadlib-warehouse"]||[]).push([[0],{36:function(e,t,n){},38:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(6),s=n.n(c),a=n(27),r=n.n(a),l=(n(36),n(0)),o=n.n(l),i=n(1),d=(n.p,n(38),n(21)),b=n(11),j=n(3);var u=function(e){function t(){return(t=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sign in button pressed"),(t=new b.a).setCustomParameters({prompt:"select_account"}),e.next=5,Object(b.d)(Object(b.b)(),t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){Object(b.e)(Object(b.b)())}return Object(b.c)(Object(b.b)(),(function(e){if(e){var t=document.getElementById("sign-in");(s=document.getElementById("sign-out")).addEventListener("click",n),console.log("user is signed in");var c=Object(b.b)().currentUser.displayName;t.hidden=!0,s.hidden=!1,document.getElementById("profileLink").innerText="".concat(c,"'s Profile")}else{var s;t=document.getElementById("sign-in");(s=document.getElementById("sign-out")).addEventListener("click",n),t.hidden=!1,s.hidden=!0,document.getElementById("profileLink").innerText="Profile"}})),Object(j.jsx)("div",{children:Object(j.jsxs)("nav",{class:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("h1",{children:"MadlibWarehouse"}),Object(j.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:[Object(j.jsx)(d.b,{className:"navbar-brand nav-link",to:"/",children:" Home"}),Object(j.jsx)(d.b,{className:"navbar-brand nav-link",to:"/play",children:"Play"}),Object(j.jsx)(d.b,{className:"navbar-brand nav-link",to:"/create",children:"Create"}),Object(j.jsx)(d.b,{className:"navbar-brand nav-link",to:"/profile",id:"profileLink",children:"Profile"}),Object(j.jsxs)("button",{type:"button",onClick:function(){return t.apply(this,arguments)},className:"navbar-brand btn btn-outline-primary",id:"sign-in",onclick:"signIn()",children:[Object(j.jsx)("i",{className:"material-icons",children:"account_circle"}),"Sign-in with Google"]}),Object(j.jsx)("button",{hidden:!0,type:"button",onclick:b.e,className:"navbar-brand btn btn-warning",id:"sign-out",children:"Sign Out"})]})]})})};var h=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(u,{}),Object(j.jsx)("h2",{children:"Welcome to Madlib Warehouse"}),Object(j.jsx)("p",{children:"Play, Create, and Share Madlibs"})]})};function O(){if(1==!!Object(b.b)().currentUser){var e=document.getElementById("madlibtextarea").value,t=document.getElementById("storytitle").value;console.log(e);for(var n=[],c=[],s=[],a=0;a<e.length;a++){var r=e.charAt(a);if("#"==r){alert("invlaid character #");break}"("==r?n.push(a):")"==r&&c.push(a)}if(n.length!=c.length||0==c.length||t.length<1)alert("Your story needs a title must have at least one word request in ( ). ");else{for(var l=0;l<n.length;l++){var o=n[l],i=c[l]+1,d=e.slice(o,i);s.push(d),console.log(d),console.log(s)}for(var j=0;j<s.length;j++){var u="#"+j;e=e.replace(s[j],u)}console.log(n),console.log(e);var h={wordList:s,story:e,title:t,uid:Object(b.b)().currentUser.uid,name:Object(b.b)().currentUser.displayName,plays:0};document.getElementById("madlibtextarea").value="",document.getElementById("storytitle").value="",console.log(h),function(e){var t=JSON.stringify(e);fetch("/create/post",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))}(h),document.getElementById("openModal").click()}}else alert("please sign in")}var m=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(u,{}),Object(j.jsx)("p",{children:"This is Create"}),Object(j.jsx)("p",{children:"In this section, write your own mad lib template"}),Object(j.jsx)("p",{children:"When you write your story, request words by putting them in parenthesis."}),Object(j.jsx)("p",{children:"ex: Harold was a (adjective) (animal). He loves to (verb)."}),Object(j.jsx)("input",{type:"text",id:"storytitle",placeholder:"Write Title Here"})," ",Object(j.jsx)("br",{}),Object(j.jsx)("textarea",{id:"madlibtextarea",cols:"50",rows:"10",placeholder:"Write story here"}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"button",onClick:O,className:"btn btn-primary",children:"Submit"}),Object(j.jsx)("button",{hidden:!0,id:"openModal",type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModal",children:"Launch demo modal"}),Object(j.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",children:[Object(j.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Modal title"}),Object(j.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(j.jsx)("div",{class:"modal-body",children:"Your madlib template has been submitted."}),Object(j.jsx)("div",{class:"modal-footer",children:Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Close"})})]})})})]})},p=n(9);var x=function(e){var t=e.storyObject,n=t.title,s=t.wordList,a=t.story,r=s.length,l=Object(c.useState)([]),o=Object(p.a)(l,2),i=o[0],d=o[1],b=Object(c.useState)(0),u=Object(p.a)(b,2),h=u[0],O=u[1],m=Object(c.useState)(0),x=Object(p.a)(m,2),g=x[0],v=x[1],y=Object(c.useState)("width:0"),f=Object(p.a)(y,2),w=f[0],S=f[1],N=function(){var e=document.getElementById("getWord"),t=e.value,n=i;n.push(t),console.log(n),d(n),e.value="",console.log(i),O(h+1);var c=i.length/s.length*100;console.log("progess ="+c);var a="".concat(c,"%");v(c),S(a)};return Object(c.useEffect)((function(){if(h>s.length-1){document.getElementById("wordInputDiv").hidden=!0;var e=function(){for(var e=a,t=0;t<s.length;t++){var n="#"+t;e=e.replace(n,i[t])}return e}();document.getElementById("storyP").innerText=e,document.getElementById("storyTitle").innerText=n}}),[h]),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{id:"storyDiv",class:"card",children:[Object(j.jsx)("div",{class:"card-header",children:Object(j.jsx)("h2",{id:"storyTitle",children:n})}),Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsxs)("div",{id:"wordInputDiv",children:[Object(j.jsxs)("p",{children:["Please enter a ",s[h]]}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",onKeyDown:function(e){"Enter"===e.key&&N()},id:"getWord",autofocus:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{id:"textBtn",onClick:N,type:"button",className:"btn btn-primary",children:"Submit"}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{class:"progress",children:Object(j.jsxs)("div",{class:"progress-bar",role:"progressbar",style:{width:w},"aria-valuenow":g,"aria-valuemin":"0","aria-valuemax":"100",children:[" ",i.length," / ",r]})})]}),Object(j.jsx)("p",{id:"storyP"}),Object(j.jsx)("button",{onClick:e.resetGame,type:"button",className:"btn btn-warning btn-sm",children:"Reset"})]})]})})};var g=function(e){var t=e.storyObject;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.storyObject.title}),Object(j.jsx)("td",{children:e.storyObject.name}),Object(j.jsx)("td",{children:e.storyObject.plays}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){e.setStory(t)},className:"btn btn-primary btn-small",children:"Play"})})]})};n(41);var v=function(e){var t=Object(c.useState)(0),n=Object(p.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)([]),l=Object(p.a)(r,2),o=l[0],i=l[1],d=!1,b=!1,h={wordList:["null"],story:"null",title:"null"},O=document.getElementById("gameFrame"),m=document.getElementById("tableDiv"),v=Object(c.useState)(h),y=Object(p.a)(v,2),f=y[0],w=y[1],S=function(e){console.log("pick story clicked"),console.log(e),b=!0,w(e)};return Object(c.useEffect)((function(){var e;"null"!=f.title&&"null"!=f.story&&(console.log(b+"bool"),e=f,fetch("/play/updateplays",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)})),m.hidden=!0,O.hidden=!1)}),[f]),Object(c.useEffect)((function(){console.log("component mounted"),console.log("get stories fired"),0==d&&(d=!0,console.log("getstories about to fetch"),fetch("/play/storylist").then((function(e){return e.json()})).then((function(e){console.log(e);for(var t=e.length,n=[],c=0;c<t;c++){var s=Object(j.jsx)(g,{storyObject:e[c],setStory:S});n.push(s)}i(n)})))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(u,{}),Object(j.jsx)("p",{children:"Pick a story and play!"}),Object(j.jsx)("div",{id:"tableDiv",children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Author"}),Object(j.jsx)("th",{children:"Plays"}),Object(j.jsx)("th",{})]}),o]})}),Object(j.jsx)("div",{hidden:!0,id:"gameFrame",children:Object(j.jsx)(x,{storyObject:f,resetGame:function(){w(h),a(s+1),m.hidden=!1,O.hidden=!0}},s)})]})},y=n(8);var f=function(e){var t=e.storyObject;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.storyObject.title}),Object(j.jsx)("td",{children:e.storyObject.plays}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){e.deleteStory(t)},className:"btn btn-danger btn-small",children:"Delete"})})]})};var w=function(e){var t=Object(c.useState)("Please Sign In"),n=Object(p.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)([]),l=Object(p.a)(r,2),o=l[0],i=l[1],d=Object(c.useState)(0),h=Object(p.a)(d,2),O=h[0],m=h[1],x=Object(c.useState)(0),g=Object(p.a)(x,2),v=g[0],y=g[1],w=Object(c.useState)(!1),S=Object(p.a)(w,2),N=S[0],E=S[1],I=!1;function k(){if(0==I){I=!0;var e="/profile/getstory/"+Object(b.b)().currentUser.uid;console.log("getstories about to fetch"),console.log("pathstring is "+e),fetch(e).then((function(e){return e.json()})).then((function(e){console.log(e);for(var t=e.length,n=[],c=0,s=0;s<t;s++){var a=Object(j.jsx)(f,{storyObject:e[s],deleteStory:T});n.push(a),c+=e[s].plays}m(t),y(c),i(n)}))}}function T(e){console.log("delete button pressed");var t=e._id;fetch("/profile/delete/"+t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),i([]),E(!1)})).catch((function(e){console.error("Error:",e)}))}return Object(c.useEffect)((function(){console.log("component mounted"),console.log("initial load"+I),0==I&&1==!!Object(b.b)().currentUser&&k()}),[]),Object(c.useEffect)((function(){"Please Sign In"!=s?0==N&&(E(!0),k()):i([])}),[s,N]),Object(b.c)(Object(b.b)(),(function(e){if(e){console.log("authstate changed");var t=Object(b.b)().currentUser.displayName;a(t)}else a("Please Sign In"),E(!1)})),Object(j.jsxs)("div",{children:[Object(j.jsx)(u,{}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"card col-",children:[Object(j.jsx)("h2",{className:"card-header",id:"userNameTitle",children:s}),Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsxs)("p",{children:["Total Madlibs Created: ",O]}),Object(j.jsxs)("p",{children:["Your Madlib's total plays: ",v]})]})]}),Object(j.jsxs)("table",{className:"table col-md",children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Plays"}),Object(j.jsx)("th",{children:"Delete"})]}),o]})]})})]})},S=n(28),N=n(30),E=Object(S.a)({apiKey:"AIzaSyBD62sH1z9-cksAFFiRTXZmrhK3cKtV7nA",authDomain:"madlibwarehouse.firebaseapp.com",projectId:"madlibwarehouse",storageBucket:"madlibwarehouse.appspot.com",messagingSenderId:"675941850696",appId:"1:675941850696:web:3bfcb52b7a1536aca9827d",measurementId:"G-WMLDV4WNMT"});Object(N.a)(E);function I(){return(I=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sign in button pressed"),(t=new b.a).setCustomParameters({prompt:"select_account"}),e.next=5,Object(b.d)(Object(b.b)(),t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){if(e){console.log("user is signed in");Object(b.b)().currentUser.displayName}}window.signIn=function(){return I.apply(this,arguments)};var T=function(){return Object(b.c)(Object(b.b)(),k),Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(d.a,{children:Object(j.jsxs)(y.c,{children:[Object(j.jsx)(y.a,{path:"/",element:Object(j.jsx)(h,{})}),Object(j.jsx)(y.a,{path:"/create",element:Object(j.jsx)(m,{})}),Object(j.jsx)(y.a,{path:"/play",element:Object(j.jsx)(v,{})}),Object(j.jsx)(y.a,{path:"/profile",element:Object(j.jsx)(w,{})})]})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root")),B()}},[[42,1,2]]]);
//# sourceMappingURL=main.a6ce8da0.chunk.js.map